require('dotenv').config();
const mysql = require('mysql2');

const SCHEMA_NAME = process.env.DB_NAME;
let connection = null;

// Function to create the database schema if it doesn't exist
function createSchemaIfNotExists() {
  const connectionWithoutDatabase = mysql.createConnection({
    host: process.env.DB_HOST,
    user: process.env.DB_USER,
    password: process.env.DB_PASSWORD,
    ssl: false
  });

  connectionWithoutDatabase.connect((err) => {
    if (err) {
      console.error('Error connecting to MySQL without database:', err);
      throw err;
    }

    // Create the database schema if it doesn't exist
    connectionWithoutDatabase.query(`CREATE DATABASE IF NOT EXISTS ${SCHEMA_NAME}`, (err) => {
      if (err) {
        console.error('Error creating database schema:', err);
        throw err;
      }
      console.log(`Database schema '${SCHEMA_NAME}' created successfully or already exists.`);
      
      // Close the connection
      connectionWithoutDatabase.end();

      // Establish connection to the database
      establishDatabaseConnection();
    });
  });
}

// Function to establish connection to the database
// Function to establish connection to the database
function establishDatabaseConnection() {
  // Create the connection with the specified schema
  connection = mysql.createConnection({
    host: process.env.DB_HOST,
    user: process.env.DB_USER,
    password: process.env.DB_PASSWORD,
    database: SCHEMA_NAME,
    ssl: false
  });

  connection.connect((err) => {
    if (err) {
      throw err;
    }

    console.log('Connected to MySQL!');

    // Create the 'qticketdb' table
    const createTableQuery = `
      CREATE TABLE qticketdb (
        id INT PRIMARY KEY AUTO_INCREMENT,
        uid VARCHAR(16) NOT NULL,
        check_in DATETIME,
        check_out DATETIME
      )
    `;

    // Create the 'qticketdb_history' table
    const createHistoryTableQuery = `
      CREATE TABLE IF NOT EXISTS qticketdb_history (
        id INT PRIMARY KEY AUTO_INCREMENT,
        ticket_id INT,
        date_used DATETIME,
        type TINYINT,  
        time_used DATETIME,
        FOREIGN KEY (ticket_id) REFERENCES qticketdb(id) 
      )
    `;

    // Insert entries into the qticketdb table
    const entries = [
      '18a0-5e-e6-67-92',
      '3d42-2f-19-40-ae',
      'e640-f9-55-46-5c',
      '5306-93-7b-43-c9',
      '0b11-51-01-99-66',
      '9dd9-f0-1c-4f-47',
      'd47a-f7-73-f6-03',
      '3429-30-e8-24-c4',
      'd871-a0-58-14-70',
      '52c5-e9-34-b8-67',
      'ef96-c1-e8-80-fe',
      '3be1-da-f9-a8-8b',
      '46f2-2d-51-f8-59',
      '94dd-4e-3e-be-a4',
      '259c-c6-c4-b7-8e',
      'f313-d7-59-ac-22',
      '2342-cd-39-83-85',
      '95f0-bf-52-e6-32',
      '52ea-24-eb-76-be',
      '23c9-ca-dd-14-13',
      '35eb-dd-e0-e4-5c',
      '5524-f8-a5-c8-f6',
      '7f4f-96-28-ab-56',
      '1249-87-6c-13-08',
      '3dd2-b3-9f-d3-e2',
      '7343-1d-0d-27-27',
      '65bd-99-99-31-5d',
      '0d22-72-56-fa-69',
      '817b-a2-63-64-c1',
      '84d1-53-0f-ef-08',
      '1d6d-1a-4c-cc-61',
      '83fd-bb-7d-ca-1e',
      '08dd-01-88-e7-3f',
      '2065-83-b4-9c-dc',
      '9f18-ea-45-17-68',
      '0ff8-da-5e-fa-6c',
      '9651-8a-f3-2c-d0',
      'b598-7f-ab-b9-00',
      'dd5a-8b-e7-ac-70',
      'b82e-8c-93-d5-ec',
      '0f4c-13-87-aa-89',
      '89a3-e1-a1-5b-04',
      'dd48-3a-41-9d-24',
      '001d-d3-cb-dc-38',
      '8c53-24-31-25-78',
      '799c-21-a0-07-de',
      '922e-fc-c5-6b-79',
      '561c-05-9d-7b-cf',
      'e6ee-14-4a-53-eb',
      '6463-1b-a1-e1-cd',
      '212f-c4-cf-71-c0',
      '97c9-80-35-0b-78',
      '1b00-5f-32-c9-98',
      'c565-25-50-0a-ca',
      'e12d-25-28-56-15',
      '8af4-df-c4-39-f2',
      '76d4-ba-b1-9e-b5',
      'e406-d7-7d-ad-bf',
      '592b-92-58-82-90',
      'e59a-ab-af-fb-b5',
      '050c-c3-fa-8e-fa',
      'a7d4-41-1a-a7-df',
      'e192-ed-58-76-98',
      '8650-ca-57-07-bd',
      '9a3c-46-ec-b9-1a',
      'bc5f-f4-12-04-cf',
      '2bbd-8e-50-9e-f3',
      '5348-90-41-35-2a',
      'ed56-aa-79-aa-b3',
      '48eb-ab-ef-ae-b7',
      'f6b6-26-10-16-66',
      '8e56-d3-e9-2a-f2',
      '279c-6f-1e-87-65',
      'e555-83-c3-56-b1',
      '2dcb-5c-86-be-ec',
      '5571-1c-aa-f7-85',
      '9b27-25-75-48-d7',
      'e1ec-bc-05-bb-c2',
      '1477-bf-c3-fc-00',
      '138d-f3-51-dc-37',
      '3197-93-25-df-9a',
      '49bf-87-11-32-78',
      '933d-93-bf-8c-a2',
      'd73d-77-0e-c0-d3',
      '3040-21-13-4f-4d',
      '25bc-0b-09-12-e3',
      'e29b-f4-a1-1b-77',
      'f056-c2-07-13-8f',
      'cc4a-b8-34-0a-d8',
      'bc99-e4-41-88-b7',
      '313c-f3-a6-70-c1',
      'a9bb-85-dd-81-89',
      '04f1-b2-f5-27-fd',
      '38b0-35-92-b2-d4',
      'f251-9f-0d-a1-29',
      '66a4-5b-49-52-21',
      'f80e-37-35-17-f7',
      'e78a-0f-0c-84-18',
      '313a-58-20-8c-6e',
      '615d-bc-89-43-a2',
      '28a7-9c-ac-c2-58',
      'b385-65-22-8c-61',
      '3524-3e-e0-66-c1',
      'e56e-08-a6-12-99',
      'a4f0-8c-e8-6a-48',
      'c9fd-9c-04-1f-75',
      '3931-6c-63-c1-3e',
      'b566-b0-08-7a-2d',
      '711c-df-df-95-b5',
      'f4a9-25-16-dd-90',
      'c52c-a3-40-23-f2',
      '0f10-7c-d6-05-bb',
      'a51d-0d-39-f9-85',
      '6c85-cf-34-b0-95',
      '3622-79-dc-b8-60',
      '0c21-67-20-db-49',
      'f021-f7-ce-78-70',
      '2ec7-03-b7-c2-2a',
      '7b85-75-68-9f-c9',
      '8509-19-17-eb-a4',
      '828a-30-95-bd-91',
      'e4b6-21-79-b2-3d',
      'f6c3-a1-d7-8b-29',
      'a18b-cb-82-06-03',
      '3568-65-22-3b-0b',
      '640e-74-65-71-a8',
      'cd7c-0c-97-0e-2c',
      '4e0f-05-64-f0-c6',
      'a5cf-df-58-fb-98',
      'b069-a4-c9-6e-60',
      '6676-ec-c7-7d-5e',
      '13fd-c0-95-7e-b1',
      '3e09-a5-ea-1f-61',
      '2c00-a9-ee-fb-b7',
      '2bcd-8b-c4-f3-cd',
      'e344-4a-ad-05-87',
      '60fd-f2-02-71-f3',
      '1439-7c-10-0e-c5',
      '6c25-65-07-ec-de',
      '1dbd-cd-33-1d-4a',
      '7074-d1-2c-55-09',
      '1ef4-d5-44-e2-12',
      'ecd7-a5-4e-38-c5',
      '4a0e-1f-c9-2e-37',
      'e7cd-a5-cf-98-6c',
      'f4f8-15-53-0a-b8',
      'fd3c-6f-45-6e-fb',
      '400c-08-d6-16-34',
      '6f74-8b-ac-f4-28',
      '0a3b-9e-dc-28-4f',
      '4c19-a6-be-17-ef',
      '30c5-63-ef-66-39',
      'f8a7-ed-37-e2-f5',
      'e153-39-0e-a7-ba',
      'cdae-6b-cb-58-48',
      '69a7-2b-02-89-67',
      'ab03-36-84-0b-54',
      '36ea-76-4f-41-51',
      'f3f5-89-b2-13-91',
      'ac99-18-00-a3-21',
      'adaa-df-dd-59-81',
      'ce30-15-1d-e9-1a',
      'c0ea-86-fe-c3-fc',
      '94f9-b1-94-07-40',
      '1cb6-c8-6f-31-77',
      'fc18-e8-85-d8-38',
      'baa2-55-02-9d-81',
      '5251-9a-f0-e0-73',
      '67b6-c5-e2-a0-59',
      '3cca-af-1c-d2-ed',
      '04bf-38-e3-46-b7',
      '7efc-67-a5-ef-f9',
      '7136-a7-c5-04-82',
      '832e-37-74-73-ae',
      '3452-98-3e-52-d5',
      'be59-a1-af-fc-c2',
      '90d7-42-85-ea-31',
      'adfa-c7-4a-89-12',
      'b22d-5b-bf-e1-d1',
      '8798-f0-aa-44-07',
      'e3ea-57-2d-e1-18',
      'f6f7-ce-8d-9f-f7',
      '5c25-00-3a-d1-9e',
      '0d2d-cb-94-37-75',
      '17ac-85-48-02-50',
      'f1a6-e7-07-9c-31',
      '4717-0d-65-84-91',
      '1f11-53-b5-51-17',
      '79d9-32-8c-a2-56',
      '404b-99-97-13-ca',
      'c5c6-ec-68-db-25',
      '3f3d-bb-71-c3-28',
      '1ed4-2a-9f-fb-ab',
      '2f7f-89-29-ed-8c',
      'b61e-94-6c-18-48',
      'bd93-39-a5-e8-42',
      '4748-e1-8d-d9-e6',
      '6bac-6d-7c-72-2e',
      '9dc9-67-16-a3-c9',
      'b2cf-c0-e8-be-f7',
      'dd74-5b-70-f5-76',
      'ad7a-ac-5e-37-af',
      'c20b-92-30-9b-58',
      'a2d9-ef-c3-4f-51',
      'a4d9-09-ef-e6-ea',
      '0e88-8e-08-6e-8f',
      '13d3-a8-0a-b7-32',
      '66d5-f0-30-f0-fc',
      '5669-95-f0-87-e7',
      '631d-3b-4b-a7-7f',
      'e2ce-3b-d9-ce-51',
      '1599-2a-2c-e6-2a',
      '816a-07-7c-67-ab',
      '481f-c2-7c-56-40',
      'f62a-f2-ed-74-06',
      '41fa-f5-b3-e1-c9',
      'bd20-f1-e4-fd-d7',
      'b368-54-cb-75-31',
      '1d5c-b4-53-73-30',
      '9c0c-c7-45-a1-bb',
      'a998-ea-fc-55-12',
      '4f19-0b-af-a4-af',
      'b856-5e-91-15-12',
      '7750-04-fb-73-bf',
      '6c08-ce-fb-3a-4e',
      'ca61-17-44-6a-87',
      'c402-90-14-03-28',
      'b154-16-41-0a-c1',
      '299b-3c-fb-d1-5b',
      'f52b-9a-6f-eb-84',
      '6827-dd-d2-27-a6',
      'b33a-ae-a6-b9-7b',
      '90a0-bb-07-64-13',
      '6b13-d5-3a-b4-26',
      '8435-93-2b-e6-51',
      'eb44-7c-6e-a2-f9',
      'e062-4b-bf-29-84',
      '93ba-3d-dd-87-80',
      'e342-72-d1-94-2b',
      '7e5b-fe-60-70-b2',
      '87ca-96-e0-aa-4e',
      'c6ae-1d-61-23-b7',
      'b0bf-7e-52-bf-b4',
      'b5ba-24-fb-f2-30',
      '8e20-a8-89-18-e2',
      '6e69-19-40-d9-bb',
      'ddb8-ee-f4-5f-4a',
      '98fa-71-ae-d0-48',
      '6dbd-6e-a1-d7-1b',
      '0bd6-b4-f0-b7-24',
      '0730-b2-1b-e3-21',
      'e0ed-bc-3b-45-b9',
      '4bef-6a-43-3a-65',
      '6d99-86-df-28-b3',
      '8d93-6a-a9-47-df',
      '8fe2-4b-53-c6-cd',
      'ab0e-c4-e0-8b-e1',
      '4c06-b6-d2-59-7a',
      'd96e-b1-21-ce-96',
      '2137-45-13-ba-3d',
      '3b73-fe-26-30-1e',
      '1690-81-eb-12-a1',
      '45d4-37-21-00-7d',
      'e000-5b-a8-5f-79',
      '1004-14-b7-dd-81',
      'bfdc-7c-e8-0a-ed',
      '00c6-03-03-f4-6f',
      'fb5b-ae-42-2b-a0',
      'fa87-6d-ee-ea-ca',
      'd28b-36-65-ab-d7',
      'b592-49-45-3f-d0',
      'e71f-79-1b-da-a3',
      'd9e2-8f-2f-77-4c',
      '2e07-66-93-dd-52',
      '8acf-5f-a7-37-6c',
      '3317-61-1f-a0-32',
      '4cdd-c9-e3-17-9e',
      '7173-a5-7f-ac-79',
      '66c3-fd-34-17-d2',
      'edba-e9-c9-67-00',
      'b141-7f-2e-06-74',
      '59d3-34-ea-80-9b',
      '4295-c6-d2-c9-29',
      'f359-df-5d-90-27',
      'd415-08-0e-d9-c2',
      'bd78-08-48-cb-27',
      '9ba1-72-ef-09-94',
      '5a62-fa-7e-b1-b3',
      '4173-1e-03-6b-bc',
      '9ce0-54-46-c2-72',
      'b73a-2b-33-f5-3a',
      '00af-e0-0a-27-e4',
      '30e5-33-c4-76-ef',
      'beb7-89-58-e7-32',
      'b840-00-06-21-48',
      '4dba-7e-a4-ac-40',
      '3489-07-83-2e-64',
      'ba03-6c-c5-9a-47',
      '3c3d-4f-f4-d7-a8',
      'e28d-de-ad-c4-5f',
      'f4a2-fa-fb-01-2c',
      '2c7a-12-a3-99-2c',
      'c433-f4-eb-b4-a0',
      '8ce7-63-d7-ee-e8',
      '251d-56-f4-be-52',
      '2123-d6-3d-87-85',
      '5a7f-96-0d-e8-3d',
      '8661-69-ba-07-73',
      '308a-9a-48-4c-cf',
      '120a-44-74-18-83',
      '1076-60-7c-08-2d',
      '81ca-3b-4a-d3-c1',
      '0eb0-2c-71-74-93',
      '141f-e6-6c-e7-c8',
      '0e69-81-f7-30-d1',
      '2d88-6c-9d-d9-03',
      '83ba-c4-7f-a3-c4',
      'f2ce-1e-4d-64-19',
      '7654-55-7b-e4-7e',
      'c45e-43-b2-ef-23',
      '4356-b9-ad-04-aa',
      '2768-a0-7c-b7-be',
      '18cb-ca-b0-ad-f2',
      '82ee-d2-71-57-32',
      '9ae1-a5-19-92-48',
      'ace1-1a-75-3c-3c',
      '32d2-c3-a4-1f-7b',
      '3e88-00-fc-bb-58',
      '35d2-03-4d-5c-13',
      '734e-20-01-07-ef',
      '3fe9-98-16-2c-be',
      '9a95-bd-b8-1f-68',
      'dadc-e5-78-98-6c',
      '4a0e-82-3a-6c-a4',
      '40b8-84-c2-db-ec',
      'b2f0-0b-bc-c4-52',
      'bda7-e5-9b-41-68',
      '9119-8e-e0-2d-b2',
      'eacc-ae-0a-63-80',
      '85e8-8c-62-1d-93',
      'df93-46-0e-3e-ba',
      'f366-99-72-74-d3',
      'e9dc-d2-ed-77-6f',
      '884d-b3-12-45-9f',
      '951b-68-d1-80-ac',
      '9e67-6c-5d-6b-57',
      '23d2-4d-39-54-53',
      '40aa-02-47-9a-56',
      'e8bf-e5-8a-56-38',
      'c4a8-a2-7f-67-ac',
      '0d93-ec-ed-d0-7f',
      '69d1-de-3e-0f-21',
      '8f87-02-40-fe-9b',
      'a679-01-d2-f0-6b',
      '6f50-d7-3c-46-1c',
      'db95-73-23-73-44',
      '7207-cf-97-69-a3',
      '604a-cc-11-f0-b4',
      '2e4a-bb-49-3c-e9',
      '83f1-50-5d-c7-07',
      '0a2f-88-60-b1-27',
      '14ee-90-5e-98-aa',
      'f193-ec-9b-62-1c',
      '5c1f-51-b7-8b-d9',
      '4da7-80-38-85-e9',
      '127e-93-e9-f5-02',
      'c3fd-6f-35-57-f7',
      'e4ab-04-f4-08-92',
      '71a8-ba-b1-a7-b5',
      '5f19-74-bc-68-25',
      '8ace-e5-2b-ee-dc',
      'c8a5-18-84-ce-0e',
      '69e8-5d-78-d0-1a',
      '7709-08-ee-da-f6',
      'e5df-ac-5e-e6-14',
      '81a5-73-00-d9-27',
      'de4c-f0-f3-3f-4c',
      '7401-bd-f2-40-17',
      '5671-4d-ec-d0-34',
      'b400-d5-bb-bb-4b',
      '9dd8-9b-7b-73-8e',
      'd450-45-cd-b7-5f',
      '4794-e6-66-7e-84',
      '4d9f-e3-ce-02-17',
      '2a75-01-4c-a5-3c',
      'ca55-63-65-49-06',
      '79a3-f4-e9-8e-54',
      '6321-41-96-f0-28',
      '8131-4e-c3-7b-de',
      '2a6a-bc-de-fe-6d',
      '7556-36-5d-8a-37',
      '73e8-73-9e-ca-3e',
      'e846-ef-3f-09-3f',
      '05e7-c3-39-b6-a3',
      'a732-6d-70-20-a2',
      'bb9e-b5-67-67-73',
      '7851-d3-32-bc-8a',
      '02c6-46-31-a2-be',
      'ee4e-40-7d-f5-96',
      '0c0d-36-b0-61-9e',
      '30f2-0a-64-5b-fe',
      '3ec7-08-b9-05-96',
      '03e4-6f-c5-74-09',
      'bd06-0a-bf-62-cc',
      '379b-b0-bb-55-f2',
      'af54-67-b5-7a-87',
      'd997-35-42-43-6d',
      '3297-50-09-5f-97',
      '1176-48-5c-ae-3a',
      'f82a-3b-36-4e-d5',
      'c68b-fa-16-e7-a9',
      'a1b1-b0-7d-ba-48',
      '3577-8b-18-61-6c',
      '4489-df-73-59-52',
      'e468-02-ae-1f-82',
      '502d-db-0e-cf-f6',
      'cee2-b1-4f-4e-5e',
      '85de-37-7f-c8-ef',
      '4ef3-3d-a6-a8-20',
      '7257-2b-f9-88-8a',
      '1c66-ea-0b-bb-c7',
      '9ff3-b3-8b-e5-99',
      'ae32-3c-e8-44-54',
      'e2ed-5f-ce-6d-c4',
      '4f8a-ca-dc-86-ee',
      '4353-5b-93-d0-9d',
      'cc08-58-00-64-1e',
      '2904-f5-f4-12-ef',
      '3381-8c-a6-0d-8a',
      '8479-fe-ad-3e-7e',
      '2e4c-0b-97-16-67',
      '726c-a8-c4-5e-24',
      '55eb-f3-30-26-72',
      '1e3b-99-22-62-fb',
      'f93d-aa-db-c7-77',
      '076c-57-66-d1-69',
      'd3d2-ca-da-d5-f1',
      '2b48-52-7f-62-1a',
      '7274-e7-68-75-1e',
      '35c8-02-e5-4a-c4',
      '7e20-7f-03-d8-22',
      'a964-6b-ae-6e-10',
      '0008-d7-6e-79-3e',
      '44d7-47-44-20-2a',
      '5157-f8-d0-5c-3a',
      '145a-26-0f-10-84',
      '592e-fb-a1-6a-b6',
      'edcd-90-47-d6-79',
      '636a-81-fd-c2-14',
      '5bfc-ca-58-c2-dc',
      '4482-88-fb-91-86',
      '1c24-54-0e-b0-b5',
      'd88a-3a-19-13-ce',
      '916b-9c-44-71-c5',
      'f903-c3-83-6e-6c',
      '4522-b2-5f-64-e4',
      '4396-cf-f2-ef-b4',
      'dd9c-a0-29-f6-73',
      'f8f0-63-07-53-da',
      '330d-38-f2-e6-2c',
      '2981-05-6b-d6-94',
      'ed81-f5-ac-94-14',
      '9579-94-c6-22-c8',
      'a905-5f-59-24-2c',
      '2062-27-39-7a-38',
      'b68a-56-53-10-53',
      'a6a0-83-37-0f-1d',
      '6f4f-c0-0a-03-15',
      'de1b-31-4b-46-7b',
      '62a8-fe-b0-0b-76',
      '5659-80-72-70-68',
      'ee70-e0-38-47-87',
      '1117-6d-a3-c2-6a',
      '0d95-46-67-af-4b',
      'd1c8-19-5f-a7-99',
      '574c-b8-65-c2-90',
      'f40d-d3-7c-38-a9',
      'ac7d-12-cd-85-e0',
      'd11c-dc-85-27-0f',
      '1acd-f2-a1-e4-7b',
      'bc27-9d-c6-13-68',
      'bb40-8d-06-3b-9c',
      '9ba0-86-6c-14-48',
      'bf86-28-c0-d8-11',
      'a607-f7-47-fc-e2',
      'aa76-73-8b-e6-c5',
      'c7da-86-89-a8-b2',
      'e3f0-a3-b1-51-ef',
      '77d1-7b-26-2d-ba',
      '9dbc-68-38-30-9e',
      '47ed-4b-f8-52-b2',
      '4352-0d-76-66-58',
      '394e-3a-aa-4c-bc',
      'ce28-cc-84-65-3b',
      '9221-8c-9c-dd-13',
      '4907-dc-9b-e3-db',
      '4599-7e-a1-0c-aa',
      '6bcd-fb-be-9e-65',
      'cd13-26-1f-25-60',
      'dbcf-db-60-31-bd',
      '4dc5-c5-a4-ac-2c',
      'a4dc-0c-11-f0-93',
      '48c0-7b-16-49-f8',
      '9905-4d-84-ea-21',
      '45cd-5e-4f-f4-54',
      '4033-2c-90-1e-28',
      '6ef7-64-9a-d7-0b',
      '3b80-4a-96-c1-78',
      'e73a-b4-e7-00-13',
      '0298-a9-0f-20-0e',
      'acb6-d4-1a-f7-3e',
      '9798-31-4c-70-ef',
      'f7c6-b6-d3-d2-c5',
      '85ee-42-7e-e2-71',
      '5fca-07-3c-76-2c',
      '9ce2-b7-f7-f0-f6',
      '5485-15-70-45-a4',
      '744f-cc-14-60-bf',
      '7d0f-37-fb-41-c4',
      '23ee-fe-ae-09-b0',
      'b121-93-11-49-a4',
      '8af4-84-f8-d4-dc',
      'ec28-d4-17-37-bd',
      '562a-71-2b-59-f1',
      '8e23-55-1a-9a-53',
      '52b8-1c-29-2d-83',
      '4579-22-d5-6e-c0',
      '1bf3-aa-fa-1f-d9',
      '831c-49-48-7a-47',
      'f9fd-e0-44-35-8c',
      'c266-90-f8-19-a9',
      '2b4f-70-96-56-b0',
      '5ed2-1d-5f-5c-df',
      'abed-91-4c-f4-73',
      'a088-a4-52-8b-fe',
      '4f6b-f9-95-01-ae',
      '6733-82-63-5d-d1',
      '00ae-d9-67-5b-32',
      '6c06-0d-05-09-38',
      '6f29-80-b7-72-78',
      '5945-8c-47-2f-84',
      'f1ae-23-f5-01-9a',
      'fcbd-fc-59-93-95',
      '6b6a-08-97-7f-b0',
      'a89b-f7-f0-a3-61',
      '501c-7b-a5-67-8e',
      '0b53-b6-49-ec-fc',
      'c44a-b0-ed-04-e6',
      '3654-1b-ea-ca-09',
      '091f-92-63-d8-b4',
      '9e6e-91-c5-1b-1f',
      'acd3-8e-e3-b7-d4',
      '9b21-eb-27-ba-93',
      'fb8e-38-83-b1-12',
      '76a5-12-fa-80-20',
      'f101-66-b7-ce-0b',
      '4675-55-dc-6c-0f',
      '1427-22-6e-40-1c',
      '3f5b-e0-e8-b5-9c',
      'd7c3-d3-9d-94-84',
      '3c0e-16-ae-56-db',
      '227e-48-64-01-33',
      '15f5-37-ec-0a-f0',
      'c44c-02-ec-51-a0',
      '270c-9a-cc-14-be',
      '1575-f7-eb-48-5b',
      '6aee-73-78-11-47',
      'b104-0a-45-ce-b3',
      'c533-50-ae-69-3a',
      '3f39-67-bd-1f-98',
      '546d-b7-cd-d2-e7',
      '69e1-67-d7-9d-3c',
      'e7f4-bd-4c-98-4b',
      '1dcb-60-bd-50-45',
      'f060-1d-0c-30-63',
      'fb59-38-91-1f-95',
      '40a8-75-6f-57-8a',
      '7e5c-af-aa-23-dc',
      'aa6b-4c-b1-a2-d8',
      '3835-66-e0-96-63',
      'de67-48-42-90-d8',
      '2a5a-07-f1-31-6c',
      '9397-b9-35-7a-a5',
      '1fc1-bd-c7-4b-2e',
      '64b8-a6-8a-52-69',
      'bf1f-c4-7e-46-9f',
      'b2bb-4f-1e-21-a2',
      'b6a6-63-40-18-c7',
      '2d55-a5-7d-04-68',
      'c94e-ef-1c-f0-f8',
      '124d-81-b3-11-64',
      '5ed6-5d-10-91-d3',
      '94af-05-0a-ce-f9',
      'a965-eb-19-f3-7d',
      'cffd-d4-53-a9-88',
      '496c-33-44-24-3d',
      '9bcf-de-e3-02-d7',
      '8166-d0-ab-90-0b',
      '6763-2a-fd-f7-2d',
      '7f28-64-16-7c-5f',
      '367b-da-be-f3-32',
      '661b-2d-11-7c-3b',
      '044b-05-2a-ca-8a',
      '9a27-67-8a-ac-ab',
      '202a-ca-26-1a-3f',
      'b0e4-0b-85-83-34',
      '1755-41-ba-24-01',
      '7685-69-f4-21-69',
      'b750-46-68-5d-19',
      '4483-cf-ac-0e-13',
      'ac5b-14-be-80-35',
      'dbaf-4e-07-2e-3b',
      'd544-d1-d9-39-6c',
      '9417-b0-b1-80-78',
      '4198-77-f8-b3-6b',
      '345a-a5-df-fc-97',
      'b414-87-37-4e-df',
      '3607-3c-d6-49-05',
      '9020-c5-93-db-a5',
      'bd41-bb-84-4f-fb',
      '4038-53-d8-55-68',
      '3268-29-ec-15-a2',
      '97dc-c9-3c-4a-7d',
      '9632-84-4f-98-50',
      '91a5-6a-d2-94-a6',
      '8832-2c-be-86-78',
      '5570-3b-47-1f-29',
      'd63f-bb-27-b4-0c',
      '72ad-ac-5b-7b-89',
      '71d2-09-8a-bc-16',
      '7934-67-da-65-d1',
      '9b80-dd-30-5b-c5',
      'fe46-2a-89-50-be',
      '55cf-84-3f-6e-0c',
      '6671-de-06-22-fd',
      'c363-1b-b2-04-8d',
      'eb49-08-72-69-32',
      '3e40-e6-b7-5d-f6',
      '98fd-e6-d0-c8-3c',
      '60b3-4c-96-98-05',
      'cb17-38-90-b1-c6',
      'c219-cd-1c-33-0f',
      '2221-3e-28-ae-c0',
      '1d38-40-6d-1c-bf',
      'e760-a1-a0-ed-1c',
      '99a4-ee-13-01-f6',
      '29e6-77-71-4a-6c',
      '70d8-c7-c1-8c-9b',
      '0fe8-e5-32-0a-2b',
      '64e5-a0-5b-d1-46',
      'f996-1a-57-4c-71',
      'ddf5-77-70-98-3b',
      '8cbe-90-1b-52-a4',
      '7b5f-1f-44-d9-02',
      'de38-6f-99-2e-4b',
      'c100-f5-c4-12-9a',
      'ab2b-6a-b5-dd-7f',
      'e02e-84-1d-6f-5b',
      '8e2e-dd-d8-ed-93',
      'b2a7-e4-13-ae-e5',
      'eaf6-ba-f9-ec-cf',
      'bb96-a2-39-4c-d9',
      'c033-b9-c5-f1-ae',
      'eb03-b0-8d-64-e3',
      '4e78-d3-e1-7e-22',
      '64c5-92-61-b2-0a',
      '9d1b-c1-ad-46-3e',
      'b469-f4-43-3b-4c',
      'ac16-01-37-ad-50',
      'f1d2-0d-d5-7f-35',
      'ce60-22-b1-5e-4b',
      '9fd5-b9-91-cd-d9',
      'c3f0-0b-3a-2b-26',
      'f622-b9-42-70-7a',
      'e75c-74-91-5c-b3',
      'da31-4c-22-a0-fd',
      '6a46-ae-e0-4c-94',
      '7a19-47-ba-00-ef',
      '616f-d9-a3-0f-11',
      'e3fe-9e-4e-17-18',
      '9ba0-21-f7-32-6b',
      'e0bf-33-81-77-7b',
      '0519-64-f4-20-fd',
      '05d0-56-c4-3c-04',
      '4900-ec-27-16-57',
      '322c-42-0c-6d-05',
      'c5e0-59-ba-e8-e6',
      '5198-83-1c-9d-c9',
      '77be-8f-89-c5-5b',
      'fa7b-b4-9f-4e-72',
      'b3bb-40-d0-9a-b7',
      'eefa-8a-af-77-b6',
      'd6b8-6e-e4-c5-ab',
      'c17b-3e-51-3b-37',
      'b819-f6-a6-26-2a',
      '556c-38-c4-f5-6a',
      '18c6-a5-0e-ba-c6',
      'd0f5-5e-95-51-68',
      'b402-52-8f-c7-8b',
      '4dc2-5a-ae-83-b7',
      '0555-7c-bd-c7-16',
      'ba64-6d-c5-76-f6',
      'e058-62-5d-2d-dc',
      'd094-46-d9-83-19',
      '2a59-6f-17-b4-e5',
      '10fc-0c-ce-84-6b',
      '896d-77-e4-a8-16',
      '5d41-76-1d-c0-42',
      '6e2c-99-f6-74-2d',
      'a122-a5-cd-90-5e',
      '4bbf-48-4d-29-d5',
      'a026-14-1d-6c-dd',
      'f0e6-01-cf-b2-a8',
      'f0a7-f1-0a-d5-6d',
      '4064-59-7e-99-24',
      '698f-b4-45-fd-1a',
      '22a1-73-e1-ac-c1',
      '8658-a4-72-93-f7',
      '17e5-f4-90-dc-04',
      'a916-48-b9-c8-54',
      'dcfc-03-90-4b-02',
      '78a5-10-c1-f2-97',
      'fe79-18-10-23-ea',
      'da2f-66-82-5d-e8',
      'e384-fd-d0-7d-5e',
      '97b4-f4-39-fe-f0',
      '70df-cd-34-7e-99',
      'f21f-dd-72-8f-e6',
      '36e0-c7-bd-e2-e8',
      '8d7e-3c-4c-1b-51',
      'dd90-12-21-83-32',
      'bda1-41-1a-63-c9',
      '877a-40-d2-f4-17',
      'c308-00-ec-49-bc',
      '3404-c2-98-81-71',
      'b5d0-6f-d8-f3-68',
      '15c6-af-b9-63-6c',
      'b5dc-72-bd-86-a1',
      '1c3f-09-39-c0-4c',
      '85e2-dd-cd-b0-b5',
      '47f4-bc-3c-1c-9b',
      '5135-da-be-e0-1c',
      '0777-f8-2c-d5-0e',
      '042a-f4-5a-7f-9a',
      '59bd-3c-38-92-5f',
      'ecab-21-7f-c8-0a',
      'e715-0c-e3-c0-2f',
      '3c58-c1-99-43-8d',
      'c6a1-c7-54-7c-83',
      'edfe-6c-01-f7-8f',
      'cfdc-80-09-bf-24',
      'b54f-d0-e7-93-2c',
      '084b-14-1c-3e-fc',
      '4c8a-88-87-77-be',
      'e0c6-28-89-ac-e6',
      'f288-30-db-df-d0',
      'a0cd-28-87-07-4a',
      'a29a-ee-a6-13-12',
      'e3db-8f-35-8a-db',
      '9805-aa-89-ec-85',
      '7d12-e7-78-ac-b4',
      'd8cd-99-2f-9c-b5',
      '0bc1-25-7c-53-92',
      '4301-3a-5d-40-82',
      'dbed-12-89-65-29',
      '610e-cf-29-7b-aa',
      '9828-95-19-ea-6a',
      '80b1-0f-ca-10-af',
      '15f8-37-f7-af-93',
      '7d8e-a0-11-e6-17',
      '8430-5f-18-8e-09',
      'd9e8-74-b5-72-7a',
      'da8a-05-d5-78-7a',
      'e352-08-31-84-cf',
      '5f49-c5-9d-19-02',
      '60ae-8d-95-30-7e',
      'd724-ef-12-25-fc',
      '0982-89-92-44-78',
      '0ee6-2d-94-32-ee',
      '2813-ce-9b-39-a3',
      '1d07-ea-05-08-d2',
      '778b-b1-05-51-ba',
      'ae89-5a-1c-00-62',
      '11d5-cf-d8-ad-f6',
      'eaf3-f6-0d-90-9c',
      '6f3c-e3-df-fc-89',
      'ed4e-28-52-70-45',
      'ad3d-10-d4-a2-db',
      '5fea-f0-03-51-dc',
      '0093-a2-b5-40-dc',
      '1813-da-9a-87-53',
      '9816-a9-12-e5-d7',
      '4120-77-00-58-23',
      '2dc1-5c-cf-91-ae',
      '9e2f-84-c3-bc-80',
      'a8fd-5b-ec-a5-35',
      '419c-e4-13-e5-df',
      '6da9-fb-37-c4-b5',
      'a333-09-0d-0c-21',
      'f1b9-e5-79-29-bb',
      'ec2b-96-14-15-0b',
      '5e2d-93-fb-13-9c',
      'b527-72-f0-14-6e',
      'cec0-04-d1-d3-b3',
      '22fe-09-16-eb-51',
      '565f-80-c6-e9-02',
      '475b-48-26-85-fa',
      'f096-9e-48-8c-11',
      '0350-98-4a-00-ec',
      '034a-b2-c5-f9-c5',
      '156c-26-73-20-74',
      'ab95-fe-c3-c7-3d',
      '1abe-84-a2-b8-38',
      '6898-78-b0-33-e8',
      '25c9-b9-94-69-4a',
      '31c0-0c-d9-71-63',
      '989d-fa-f4-4f-f3',
      '0e06-af-eb-c3-58',
      'd71f-0a-8e-f4-e4',
      'f3c4-01-c7-76-c4',
      '5768-00-ec-4f-88',
      '31a8-7d-50-3b-3b',
      '342b-f7-03-af-87',
      'b720-50-c2-22-dd',
      '277d-70-96-62-a1',
      '92c4-86-e8-ec-b8',
      '4fd1-90-8d-aa-7e',
      '3753-af-07-83-65',
      'be7e-03-a3-fb-9f',
      '18a0-00-72-0b-ef',
      '75d3-ef-9c-06-bb',
      '5ea1-6a-ec-ae-6b',
      '58b5-b8-99-7c-94',
      'e984-78-3e-e6-47',
      'f6c3-53-b4-9f-ac',
      'ecae-41-c2-8d-4d',
      '13a5-5d-96-7c-af',
      '1081-0d-70-9a-61',
      'b0bd-07-56-d5-05',
      'ce61-42-23-39-95',
      'e6c6-9e-55-ba-f7',
      '525e-6c-91-d5-a5',
      '85ac-a9-74-2e-eb',
      '3b1d-1f-61-d0-24',
      'e64e-53-e9-49-97',
      'f921-69-f1-90-df',
      '56fc-85-89-a7-04',
      '570d-ab-54-45-f5',
      'b43f-9c-25-b9-e3',
      'f836-85-df-7a-21',
      '1467-42-ad-eb-3e',
      'd3a6-a7-4a-17-70',
      '437b-5a-a8-0b-b5',
      '45c2-25-0a-75-09',
      '381a-b2-8b-76-d8',
      'e5a2-5d-ec-9b-72',
      '9807-73-0e-5c-ae',
      '17aa-39-c2-69-d5',
      '06c1-f8-e5-9b-f0',
      '5b2f-f9-1c-36-32',
      '7d87-4c-9a-b8-4e',
      '3326-80-04-c2-19',
      'b99c-d0-d6-ef-e3',
      'b57c-85-aa-a8-d8',
      '26af-8a-ed-21-39',
      '21f2-7a-12-a2-1a',
      '4365-cd-e1-72-f7',
      '35b2-34-5e-e4-51',
      '495d-55-95-d5-73',
      '0314-55-9a-98-03',
      'aa9e-b1-21-65-7a',
      '5130-d3-e9-db-f2',
      'e2b5-cf-23-77-3f',
      'cd9a-08-62-c9-75',
      'a3e4-86-7c-88-55',
      '156f-12-b9-3f-64',
      '93d6-b6-99-37-a6',
      'e9bd-c7-53-62-82',
      'f982-9c-2f-d6-3a',
      '291e-cc-33-61-3a',
      '09d1-82-fe-85-b2',
      '687f-33-f8-70-eb',
      '513a-5c-f3-78-54',
      '34a1-60-bf-1b-65',
      '532e-90-e5-7f-64',
      'ca48-95-46-c9-d7',
      '647e-27-2d-76-8e',
      '6970-d8-fe-bf-4f',
      '9927-4e-15-b7-1e',
      'c9f2-bf-86-92-6a',
      'a469-dc-9c-23-4b',
      'fee7-5b-04-ec-20',
      '9cbf-2d-16-10-2c',
      '78c0-fa-18-bf-5c',
      'ac11-cf-7c-a3-56',
      '590a-f1-05-19-8b',
      '84ce-3c-4b-84-5d',
      '9022-a4-a0-9d-4b',
      'e14b-56-a4-87-7a',
      '5d31-e6-0b-46-d2',
      '29a0-b5-9d-4a-5f',
      'cafa-b3-e6-05-0c',
      '812d-8a-8a-26-15',
      'c3ea-9e-9c-f1-14',
      '0c49-7a-fc-d3-b0',
      '92c7-52-87-7e-7f',
      'd07a-b5-5a-42-42',
      '4438-99-05-99-05',
      '4e04-dd-3d-ed-c8',
      'e802-a0-87-c3-f6',
      'bf00-ef-d7-11-83',
      '04c2-70-34-5b-a4',
      '4531-9d-2a-fc-2d',
      '3683-4a-d2-19-00',
      '3c0b-0b-64-94-12',
      '3fdd-b5-a0-fa-1a',
      '198d-b4-6b-e0-de',
      '8013-66-32-df-5b',
      '6e83-19-3c-b3-ad',
      '8a8a-46-ec-0d-cc',
      '8d99-78-82-78-d8',
      '29f2-f7-4b-a9-ee',
      'dc3e-ec-10-77-7f',
      '7842-12-d0-f9-dd',
      '0ab9-1c-d7-34-1c',
      'cc83-53-7e-97-b0',
      '66ae-0d-56-9b-8b',
      '6d0e-1c-a1-f5-45',
      '87df-11-8e-1d-08',
      '4b64-65-e7-50-cf',
      '71dc-99-2a-96-ac',
      '7bea-34-3c-b6-8f',
      '5f47-85-39-25-36',
      'a569-57-dd-dc-8c',
      'b864-52-b2-69-9e',
      'e3e7-64-b3-84-61',
      'bbd7-a8-4c-5a-78',
      'e54f-4b-b8-a8-4a',
      '37cc-8c-ea-df-41',
      '6804-72-07-88-61',
      '74b4-b6-a9-71-96',
      'e9fd-76-2b-e1-8d',
      'e3ac-11-64-af-d2',
      'b9eb-0d-8a-b9-e6',
      '6ebe-e6-46-2d-d1',
      'aef8-c4-92-f7-dd',
      'b045-10-16-38-ce',
      '9b32-a9-8f-b2-ea',
      'd958-f4-14-7b-ec',
      '707d-eb-62-2e-85',
      'bee7-97-17-b7-d6',
      'cdcc-06-93-ee-4c',
      'dfac-df-30-62-b8',
      '54f2-83-d2-d4-06',
      '50c1-a0-41-b7-f0',
      '7f22-af-ed-ee-f7',
      'e13f-fb-57-2e-ad',
      '1315-44-27-9e-b9',
      '7685-2a-cf-31-5e',
      'f8e0-6b-cd-5e-1c',
      'a18a-84-90-cb-79',
      'd29a-c3-55-05-f2',
      'c9ab-be-6b-82-87',
      '7405-3d-df-59-51',
      '80b7-8b-bd-36-d8',
      '64d1-ba-1a-95-10',
      '7588-07-cf-00-79',
      '988e-4d-50-98-5c',
      '467b-15-30-1a-8a',
      '0fd3-ac-c4-4d-94',
      '761d-bf-98-b8-4f',
      '6897-f7-32-b9-c8',
      '8062-1d-f4-54-c0',
      '0e23-3f-55-5f-01',
      '862c-76-86-31-9d',
      'e72c-9a-71-a8-8c',
      '9ee9-8d-84-56-05',
      'ecac-80-7d-d2-2a',
      '8ace-33-25-94-86',
      'dcab-20-93-4f-1d',
      'f849-8c-1c-76-63',
      '2088-7f-25-b1-3b',
      'fbd6-09-d2-b6-d0',
      '1698-b0-52-c1-d8',
      '0e5e-c8-7a-91-0b',
      '2a91-31-61-7b-87',
      '5194-57-84-3e-f3',
      'ccee-52-dc-48-bf',
      'b202-0f-50-45-69',
      '9a42-fb-8c-f1-0b',
      'cd7d-9b-3d-1c-76',
      '540f-c8-9f-84-92',
      '6b6a-6d-d1-a4-13',
      '1190-72-45-65-ed',
      '4e80-19-37-fe-3c',
      '83f7-6b-ce-d7-a7',
      '5567-0e-40-a6-09',
      'bf2e-71-36-b1-3c',
      'e54c-97-fe-5f-e1',
      '4ef0-49-56-90-4d',
    ];
    const insertQuery = `INSERT INTO qticketdb (uid) VALUES ?`;

    // Execute queries sequentially
    connection.query(createTableQuery, (error) => {
      if(error?.message.startsWith(`Table '${SCHEMA_NAME}' already exists`)) {
        console.log('Table already exists');
        // connection.end();
        return;
      }
      if (error) {
        console.error('Error creating qticketdb table:', error);
        return;
      }

      connection.query(createHistoryTableQuery, (error) => {
        if (error) {
          console.error('Error creating qticketdb_history table:', error);
          return;
        }

        connection.query(insertQuery, [entries.map(uid => [uid])], (error) => {
          if (error) {
            console.error('Error inserting entries:', error);
          } else {
            console.log('Tables created and entries inserted successfully');
          }
          // Close the connection
          // connection.end();
        });
      });
    });
  });
}

function getConnection() {
  return connection;
}

module.exports = {
  getConnection: getConnection,
  SCHEMA_NAME: SCHEMA_NAME
};

// Call the function to create the schema if it doesn't exist
createSchemaIfNotExists();